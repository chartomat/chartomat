!function(){function o(o,n){return o.map(function(o){return o[n]})}function n(o){for(var n=o.length;n>0&&null==o[n-1];)n--;return o.slice(0,n)}function t(t){for(var a=n(t[0]),e=t.slice(1),r=o(e,0),i=[],c=1;c<a.length;c++)i.push({name:a[c],x:r,y:n(o(e,c)),type:"scatter"});return i}function a(){var o=t(c),n=document.getElementById("chart");console.log(o),Plotly.newPlot(n,o,{},s)}function e(){var o=document.getElementById("table");new Handsontable(o,{data:c,minCols:26,minRows:100,minSpareRows:1,rowHeaders:!0,colHeaders:!0,contextMenu:!0,afterChange:function(){console.log("afterChange",arguments),a()}})}function r(){var o=c.map(function(o){return n(o)}).filter(function(o){return o.length>0}),t=""===window.location.hash||"#"===window.location.hash;if(t)$.ajax({method:"POST",url:"http://s1.chartomat.io/charts/",data:JSON.stringify(o),contentType:"application/json"}).done(function(o){console.log("Saved",o),window.location.hash=o.id,localStorage.setItem("chart-"+o.id+"-token",o.token)}).fail(function(o,n){console.log("Error",n)});else{var a=window.location.hash.substring(1),e=localStorage.getItem("chart-"+a+"-token");$.ajax({method:"PUT",url:"http://s1.chartomat.io/charts/"+a,headers:{"X-Chart-Token":e},data:JSON.stringify(o),contentType:"application/json"}).done(function(o){console.log("Updated",o)}).fail(function(o,n){console.log("Error",n)})}}function i(){if(window.location.hash&&window.location.hash.length>1){var o=window.location.hash.substring(1);$.ajax({method:"GET",url:"http://s1.chartomat.io/charts/"+o,dataType:"json"}).done(function(o){c=o.raw_data,e(),a()}).fail(function(o,n){console.log("Error",n)})}else c=l,e(),a()}var c=[],l=[["","London","Warsaw"],["Jan",7,-2],["Feb",7,-3],["Mar",9,3],["Apr",11,8],["May",14,14],["Jun",16,16],["Jul",19,18],["Aug",19,18],["Sep",17,14],["Oct",13,9],["Nov",10,3],["Dec",7,-1]],s={displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]};window.chartomat={init:i,save:r}}();