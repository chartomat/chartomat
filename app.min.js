!function(){function n(n,t){return n.map(function(n){return n[t]})}function t(n){for(var t=n.length;t>0&&null==n[t-1];)t--;return n.slice(0,t)}function o(o){for(var e=t(o[0]),a=o.slice(1),r=n(a,0),i=[],c=1;c<e.length;c++)i.push({name:e[c],x:r,y:t(n(a,c)),type:"scatter"});return i}function e(){var n=o(l),t=document.getElementById("chart"),e={};Plotly.newPlot(t,n,e,s)}function a(){var n=document.getElementById("table");new Handsontable(n,{data:l,minCols:26,minRows:100,minSpareRows:1,rowHeaders:!0,colHeaders:!0,contextMenu:!0,afterChange:function(){console.log("afterChange",arguments),e()}})}function r(){var n=l.map(function(n){return t(n)}).filter(function(n){return n.length>0}),o=""===window.location.hash||"#"===window.location.hash;if(o)$.ajax({method:"POST",url:"http://s1.chartomat.io/charts/",data:JSON.stringify(n),contentType:"application/json"}).done(function(n){console.log("Saved",n),window.location.hash=n.id,h.show(),localStorage.setItem("chart-"+n.id+"-token",n.token)}).fail(function(n,t){console.log("Error",t)});else{var e=window.location.hash.substring(1),a=localStorage.getItem("chart-"+e+"-token");$.ajax({method:"PUT",url:"http://s1.chartomat.io/charts/"+e,headers:{"X-Chart-Token":a},data:JSON.stringify(n),contentType:"application/json"}).done(function(n){console.log("Updated",n)}).fail(function(n,t){console.log("Error",t)})}}function i(){if(window.location.hash&&window.location.hash.length>1){var n=window.location.hash.substring(1);return $.ajax({method:"GET",url:"http://s1.chartomat.io/charts/"+n,dataType:"json"}).then(function(n){return h.show(),n.raw_data}).fail(function(n,t){console.log("Error",t)})}return $.Deferred().resolve(u).promise()}function c(){i().done(function(n){l=n,a(),e()})}function d(){i().done(function(n){l=n,e()})}var l=[],u=[["","London","Warsaw"],["Jan",7,-2],["Feb",7,-3],["Mar",9,3],["Apr",11,8],["May",14,14],["Jun",16,16],["Jul",19,18],["Aug",19,18],["Sep",17,14],["Oct",13,9],["Nov",10,3],["Dec",7,-1]],s={displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]},h=function(){var n=document.getElementById("share-btn");return{show:function(){n&&n.removeAttribute("hidden")}}}(),f=function(){function n(){var n=window.location.hash.replace("#","");return'<iframe \n   src="http://chartomat.io/embed/#'+n+'" \n   style="border:none;height:400px;width:600px">\n</iframe>'}var t=document.getElementById("share-tooltip"),o=document.getElementById("embed-code");return{toggle:function(e){t.hasAttribute("hidden")?(o.innerHTML=n(),t.removeAttribute("hidden")):t.setAttribute("hidden","hidden")}}}();window.chartomat={init:c,initEmbedded:d,save:r,shareTooltip:f}}();