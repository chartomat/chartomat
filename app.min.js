!function(){function t(t,n){return t.map(function(t){return t[n]})}function n(t){for(var n=t.length;n>0&&null==t[n-1];)n--;return t.slice(0,n)}function o(o){for(var e=n(o[0]),a=o.slice(1),r=t(a,0),i=[],c=1;c<e.length;c++)i.push({name:e[c],x:r,y:n(t(a,c)),type:"scatter"});return i}function e(){var t=o(l),n=document.getElementById("chart"),e={};Plotly.newPlot(n,t,e,h)}function a(){var t=document.getElementById("table");new Handsontable(t,{data:l,minCols:26,minRows:100,minSpareRows:1,rowHeaders:!0,colHeaders:!0,contextMenu:!0,afterChange:function(t,n){"loadData"!==n&&e()}})}function r(){var t=l.map(function(t){return n(t)}).filter(function(t){return t.length>0}),o=""===window.location.hash||"#"===window.location.hash;if(o)$.ajax({method:"POST",url:"http://s1.chartomat.io/charts/",data:JSON.stringify(t),contentType:"application/json"}).done(function(t){console.log("Saved",t),window.location.hash=t.id,s.show(),localStorage.setItem("chart-"+t.id+"-token",t.token)}).fail(function(t,n){console.log("Error",n)});else{var e=window.location.hash.substring(1),a=localStorage.getItem("chart-"+e+"-token");$.ajax({method:"PUT",url:"http://s1.chartomat.io/charts/"+e,headers:{"X-Chart-Token":a},data:JSON.stringify(t),contentType:"application/json"}).done(function(t){console.log("Updated",t)}).fail(function(t,n){console.log("Error",n)})}}function i(){if(window.location.hash&&window.location.hash.length>1){var t=window.location.hash.substring(1);return $.ajax({method:"GET",url:"http://s1.chartomat.io/charts/"+t,dataType:"json"}).then(function(t){return s.show(),t.raw_data}).fail(function(t,n){console.log("Error",n)})}return $.Deferred().resolve(u).promise()}function c(){i().done(function(t){l=t,a(),e()})}function d(){i().done(function(t){l=t,e()})}var l=[],u=[["","London","Warsaw"],["Jan",7,-2],["Feb",7,-3],["Mar",9,3],["Apr",11,8],["May",14,14],["Jun",16,16],["Jul",19,18],["Aug",19,18],["Sep",17,14],["Oct",13,9],["Nov",10,3],["Dec",7,-1]],h={displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]},s=function(){var t=document.getElementById("share-btn");return{show:function(){t&&t.removeAttribute("hidden")}}}(),f=function(){function t(){var t=window.location.hash.replace("#","");return'<iframe \n   src="http://chartomat.io/embed/#'+t+'" \n   style="border:none;height:400px;width:600px">\n</iframe>'}var n=document.getElementById("share-tooltip"),o=document.getElementById("embed-code");return{toggle:function(e){n.hasAttribute("hidden")?(o.innerHTML=t(),n.removeAttribute("hidden")):n.setAttribute("hidden","hidden")}}}();window.chartomat={init:c,initEmbedded:d,save:r,shareTooltip:f}}();